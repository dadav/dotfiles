# Hidden Aliases
[ -f ~/.hidden_alias ] && source ~/.hidden_alias

# Ls
alias ll="ls -l --color=auto"
alias l="ll"
# Editors
alias vi="vim"
alias emacs="emacs -nw"
alias e="emacs"
# Cd
alias ..="cd .."
alias ...="..;.."
alias ....="...;.."

alias grep="grep --colour"

# Go in Monitoring mode
alias start_monitor="sudo systemctl stop NetworkManager; \
    sudo ip link set wlp20s0 down; \
    sudo iwconfig wlp20s0 mode monitor; \
    sudo ip link set wlp20s0 up"
alias stop_monitor="sudo ip link set wlp20s0 down; \
    sudo iwconfig wlp20s0 mode managed; \
    sudo ip link set wlp20s0 up; \
    sudo systemctl start NetworkManager"

# Track dotfiles
alias config='/usr/bin/git --git-dir=$HOME/git/dotfiles --work-tree=$HOME'

# Fix the terminal
alias fix='reset; stty sane; tput rs1; clear; echo -e "\033c"'

# Misc
alias cal="cal -w3"
#alias vm="virt-manager --connect qemu:///session"
#alias pyenv="source ~/python/venv/bin/activate"
alias clearhist="history -cw"
# Print path 
alias ppath="echo $PATH | tr ':' '\n' | nl" 

# Beautiful git output
alias gitlog="git log --oneline --decorate --graph --color --all"

alias wanip='dig +short myip.opendns.com @resolver1.opendns.com'
alias lanip='hostname -i'

# Upgrade all pip packages
alias pipupdateall="pip freeze --local | grep -v '^\-e' | cut -d = -f 1  | xargs pip install -U"

# rhash Commands
alias rh-create="sudo rhash -r --sha3-224 --bsd /etc -o /root/hash.lst"
alias rh-check="sudo rhash -r -c --bsd --skip-ok /root/hash.lst"
alias rh-update="sudo rhash -r -u /root/hash.lst"

# rkhunter
alias rk-update="sudo rkhunter --update"
alias rk-check="sudo rkhunter --check"
alias rk-systemchange="sudo rkhunter --propupd"
###################
##### FUNCS #######
###################

function addsubtitles() {
    ffmpeg -i "$1" -i "$2" -c:s mov_text -c:v copy -c:a copy "OUT_$1"
}

# Plays rain in the background
function rain() {
    mpg123 --loop -1 ~/music/rain.mp3 > /dev/null 2>&1 & 
}

# Shows map
function showmap() {
    telnet mapscii.me
}

# Cuts music files! usage: cutmp3 FILE [START] STOP (in secs)
function cutmp3() {

if [[ $# -eq 2 ]]; then
    ffmpeg -i "$1" -acodec copy -to "$2" "CUT_$1"
else
    ffmpeg -i "$1" -acodec copy -ss "$2" -to "$3" "CUT_$1"
fi
}

# Plays video
function play() {
    mpv "$@" > /dev/null 2>&1 &
}

# Jump to manpage section
function manj() {
    man --pager='less -p "'$1'"' $2
}

# Show last commands 
function getlast() { 
    fc -ln -${1:-10} | sed 's/[[:space:]]*//' 
}

# Small Calculator
function c(){
    echo "$*" | bc -l
}

# Big clock
function bclock(){ 
    watch -n1 -t "date +%T | toilet -f mono9"
}

# Small persistent clock
function sclock(){ 
    while sleep 1; do     
        tput sc; tput cup 0 $(($(tput cols)-29)); date; tput rc; 
    done 
}

# Get commandlinefu stuff 
function cmdfu() {     
    curl "http://www.commandlinefu.com/commands/matching/$@/$(echo -n $@ | openssl base64)/plaintext"; 
}

# Record screen
function rec_screen() {
    ffmpeg -f x11grab -r 25 -s 1600x900 -i :0.0 out.mpg
}

# Show wetter
function wetter() {
    curl -s wttr.in/Ostfildern?lang=de
}

# Youtube Downloader
function y2mp3(){
    youtube-dl -x -i -o "%(title)s.%(ext)s" --audio-format mp3 --audio-quality 9 --add-metadata --metadata-from-title "%(artist)s - %(title)s" $*
}

# Beautiful strace
function bstrace() {
    strace $* |& vim -c ":set syntax=strace" -
}

# Share files
function sharefiles() {
    
if [[ $# -eq 1 ]]; then
    port=$1
else
    port=8000
fi

python -m http.server $port

}

# Show pinguin on error; everything is better with tux :)
function show_err(){
        ret=$?
        echo "return code $ret" | cowsay -f tux | toilet -f term --gay
        return $ret
}

trap 'show_err' ERR 
